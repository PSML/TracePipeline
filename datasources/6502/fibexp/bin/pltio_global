#!/bin/bash

if [ $# -ne 2 ]; then
  echo "USAGE: $0 [exp] [pdf]"
  exit 0
fi

exp=$1
pdf=$2

echo "$exp=load('$exp.diff1_ALL.histmapped');"
echo "${exp}x=[0:1:rows($exp)-1];"
echo "${exp}x=${exp}x';"

echo "${exp}io=load('${exp}_ALL.io.histmapped');"
echo "${exp}iox=${exp}io(:,1);"
echo "${exp}ioy=${exp}io(:,2);"

echo "${exp}glb=load('${exp}_ALL.global.histmapped');"
echo "${exp}glbx=${exp}glb(:,1);"
echo "${exp}glby=${exp}glb(:,2);"

echo "f=figure(1);"
echo "set(f,'visible','off');"

echo "hold off;"
echo "plot(${exp}x,$exp,'b.');"
echo "hold on;"
echo "plot(${exp}iox,${exp}ioy,'ro');"
echo "hold on;"
echo "plot(${exp}glbx,${exp}glby,'go');"

echo "axis([0,rows($exp)-1,0,4600]);"
echo "ylabel('index');"
echo "xlabel('state');"
echo "legend({'$exp','io', 'global'},'location','north');"
echo "legend('boxon')"

echo "H=113; W=9;"
echo "set(f,'PaperOrientation','landscape');"
echo "set(f,'PaperSize',[H,W]);"
echo "set(f,'PaperPosition',[0,0,H,W]);"
echo "ax=gca();"
echo "set(ax,'position',[0.0065,0.05,0.991,0.91]);"

echo "print(f,'$pdf','-dpdf');"
